(function(){function l(){if(m=s.match(/[\/?&]c=([^&]+)/))return 0;for(var a="",e="",b="",c,f,h=0,d=o.length;h<d;){f=o[h].split("|");if(g.indexOf(f[1])>-1){a=f[0];b=f[3];h=0;f=f[2].split(";");for(var k=f.length;h<k;h++)if(d=n.match(RegExp("[/?&]"+f[h]+"([^&]+)"))){e=d[1];break}break}h++}if(a)e=a=="google"&&/gb2312/i.test(n)||b=="URLEncode"?"_URL."+e:b=="UTF-8"?"_UTF."+decodeURIComponent(e):"_UTF."+e;else if(a=j.test(g)?g.match(j)[2]:"",!a)return 0;e=escape(e);c={si:a,ke:"",qu:e,ho:g,la:p};return i.replace(/\{(\w+)\}/g, function(a,b){return c[b]})}function k(){if(!m)return 0;var a=m[1],b="",c="",d;a.indexOf("A")>-1&&(a=a.split("A"),b=a[0],c=a[1]);if(!b)return 0;c=escape(c==1?"":c);d={si:b,ke:c,qu:"",ho:g,la:p};return i.replace(/\{(\w+)\}/g,function(a,b){return d[b]})}var c=/\.ctrip\.com|\.sh\.ctriptravel\.com/,j=/^([\w-]+\.)?(.+)\.(com|net|org|info|biz|cc|tv|cn|gov\.cn|name|mobi)$/,b=/ctrip\.com\.hk|ctrip\.com\.cn|sh\.ctriptravel\.com/,a=/english\.|\.english\./,i="SmartLinkCode={si}&SmartLinkKeyWord={ke}&SmartLinkQuary={qu}&SmartLinkHost={ho}&SmartLinkLanguage={la}", o=["google|google|q=|UTF-8","baidu|baidu|wd=;word=;kw=|URLEncode","yahoo|yahoo|p=|UTF-8","yahoo|yisou|search:|UTF-8","yahoo|3721|p=|URLEncode","sohu|sogou.com|query=|URLEncode","sohuwz|sohu.com|query=|URLEncode","sinawz|sina.com||","sina|iask.com|k=;_searchkey=;key=|URLEncode","163wz|126.com|q=|URLEncode","163wz|163.com|q=|URLEncode","163wz|188.com|q=|URLEncode","163wz|yeah.net|q=|URLEncode","163|163.com|q=|URLEncode","tom|tom.com|word=;w=|URLEncode","hao123|hao123.com||","265|265.com||","21cn|21cn.com|keyword=|URLEncode", "qqwz|qq.com||","qq|soso.com|w=|URLEncode","online|online.sh||","9991|9991.com||","live|msn|q=|UTF-8","yodao|yodao|q=|UTF-8","lycos|lycos|query=|UTF-8","ask|.ask.com|q=|UTF-8","altavista|altavista|q=|UTF-8","search|search.com|q=|UTF-8","netscape|netscape|query=|UTF-8","zhongsou|zhongsou|w=;word=|URLEncode","alice|alice.it|qs=|","teoma|teoma|q=|UTF-8","earthlink|earthlink|q=|UTF-8","cnn|cnn|query=|","looksmart|looksmart|key=|UTF-8","about|about|terms=|","excite|excite|qkw=;q_all=|","mamma|mamma|query=|UTF-8", "alltheweb|alltheweb|q=|UTF-8","gigablast|gigablast|q=|UTF-8","aol|aol|query=|UTF-8","shtz1104|www.travelzoo.com||"],n=document.referrer,g=n.match(/^\w+:\/\/([^\/]+)/);if(g&&!c.test(g=g[1])){var c=document.domain,p=a.test(c)?"en":"zh",s=location.href,a={},q=[],m;if((a.Session=l())||(a.Session=k())){var r=(location.search||"").match(/[\?&]isctrip=([^&]+)/i);if((r?unescape(r[1]):null)!="T"){a.expires=(new Date((new Date).getTime()+2592E6)).toGMTString();a.path="/";a.domain=c.match(b)||"ctrip.com";for(var d in a)q.push(d+ "="+a[d]);document.cookie=q.join("; ");b=["src%5Fname","src%5Fkeyword","src%5FQuary","src%5Fhost"];d=0;for(c=b.length;d<c;d++)document.cookie=b[d]+"=; domain="+a.domain+"; path=/; expires="+(new Date(0)).toGMTString()}}}})(); (function(){function l(a){return(a=k.match(RegExp("[\\?&]"+a+"=([^&]+)","i")))?unescape(a[1]):null}try{var k=location.search||""}catch(c){k=document.URL.match(/\?[^#]+/)||""}for(var j=[],b,a=["campaign","adid"],i=0;i<a.length;i++)(b=l(a[i]))&&j.push(a[i]+"="+escape(b));if(j.length)b=document.domain.match(/ctrip\.com\.hk|ctrip\.com\.cn|sh\.ctriptravel\.com/)||"ctrip.com",document.cookie="traceExt="+j.join("&")+"; domain="+b+"; path=/; expires="+(new Date((new Date).getTime()+26784E5)).toGMTString()})();